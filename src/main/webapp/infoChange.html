<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정보변경</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="css/infoChange.css">
    <link rel="icon" href="images/favicon.ico">
</head>
<body>

    <header>
        <div class="web_container">
            <div class="logo">
                <span>딜리버리</span>
            </div>
            <div class="utilBtn">
                <a href="main.html">
                    <span>브랜드홈</span>
                </a>
                <a href="login.html">
                    <span>로그아웃</span>
                </a>
                <a href="#">
                    <span>MY킹</span>
                </a>
                <a href="#">
                    <span>고객센터</span>
                </a>
            </div>
            <div class="personInfo">
                <p>김도형 님 안녕하세요</p>
                <a href="myKing.html">
                    <strong>MY킹 바로가기</strong>
                </a>
            </div>
        </div>
    </header>

    <main>
        <div class="mainHeaderWrap">
         
            <div class="mainHead_container">
                <div class="personal_logan">
                    <div class="logan_line"></div>
                    <a href="#">
                        <div class="personal_order">
                            <dl>
                                <dt><strong>딜리버리 주문내역</strong></dt>
                                <dt><span>주문 내역이 없습니다</span></dt>
                            </dl>
                        </div>
                    </a>
                    <a href="#">
                        <div class="personal_cart">
                            <dl>
                                <dt><strong>카트</strong></dt>
                                <dt><span>카트에 담은 상품이 없습니다</span></dt>
                            </dl>
                        </div>
                    </a>
                </div>
            </div>
        </div>

		<div class="contents_wrap">
			    	<div class="locationWrap">
			            <div class="l_container">
			                <div class="l_navi">
			                    <a href="deliveryHome.html">
			                        <span>딜리버리</span>
			                    </a>
			                    <a href="menu.html">
			                        <div id="arrow_img"></div>
			                        <span>MY킹</span>
			                    </a>
			                    <a href="infoChange.html">
			                        <div id="arrow_img"></div>
			                        <span>회원 정보 변경</span>
			                    </a>
			                    
			                </div>
			
			                <div class="location">
			                    <span class="addr">
			                        <span>배달지를 선택하세요</span>
			                    </span>
			                    <span class="shop" hidden="hidden">
			                        <span>부산태화점 </span>
			                    </span>
			                    <span class="money" hidden="hidden">
			                        최소주문금액 : 
			                        <span>13,000원</span>
			                        
			                        <span>/ 배달팁 : 0원</span>
			                    </span>
			                    <span class="btn">
			                        <a href="#">
			                            <span>변경</span>
			                        </a>
			                    </span>
			                </div>
			
			            </div>
		       		</div>
			    
			        <div class="contents_box box1">
			        	<div class="c_container">
			        		<div class="subtit_wrap">
			        			<h2 class="page_tit st02">MY킹
			        			<span> > 정보변경</span>
			        			</h2>
			        			
			        		</div>
			        		<div class="myKing_info">
				        		<div class="member_info">
				        			<p class="user">
				        				<strong>김도형 님!</strong>
				        				<span>반갑습니다</span>
				        			</p>
				        			<div class="links">
				        				<a>
				        					<span>정보변경</span>
				        				</a>
				        				<a href="#/myLocation" class="">
				        					<span>MY배달지</span>
			        					</a>
				        			</div>
			        			</div>
			        			<div class="coupon_info">
			        				<dl class="info_membership welcome">
			        					<dt>멤버십</dt>
			        					<dd>
			        						<strong>WELCOME</strong>
		       							</dd>
			        					<a href="#/membership" class="btn_detail">
			        						<span>details</span>
		        						</a>
		       						</dl>
		       						<dl class="info_coupon">
		       							<dt>나의 쿠폰</dt>
		       							<dd>
		       								<strong>멤버십0 딜리버리 0</strong>
		       								<a href="#/coupon" class="btn_detail">
		       									<span>details</span>
		 									</a>
		 									</dd>
									</dl>
									<dl class="info_order">
										<dt></dt>
										<dd>
											<strong>주문이력</strong>
												<a href="#/orderList" class="btn_detail">
													<span>details</span>
												</a>
										</dd>
									</dl>
								</div>
			        		</div>
			        	</div>
		        	</div>
        
        <div id="order_wrapper">
        <div id="order_area">
            <h1 class="title">회원 정보 변경</h1>

            <div id="common_info" class="info_box">
                <div class="sub_title">
                    <i class="bi bi-person-fill"></i>
                    기본정보
                </div>

                <div class="input_area">
                    <div class="mb-3 row">
                        <label for="inputEmail" class="col-sm-3 col-form-label">이메일 아이디</label>
                        <div class="col-sm-9">
						  <span id="emailInfo">asdas@naver.com</span>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-sm-3 col-form-label">이름</label>
                        <div class="col-sm-9">
                          <span>홍길동</span>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-sm-3 col-form-label">휴대폰 번호</label>
	                        
	                        <div class="col-sm-9">
	                          <span id="phoneNumber">01012345678</span>
	                          <button type="button" class="phoneNumberChangeBtn">변경</button>
	                        
	                        	<div class="auth_numWrap" id="certificationNumWrap" style="display: none;">
	                        		<input type="text" placeholder="휴대폰 번호를 입력해 주세요">
	                        		<button type="button">인증번호 발송</button>
                        		</div>
	                        	
	                        	<div class="auth_numWrap" id="resetWrap" style="display: none;">
	                        		<input type="text" placeholder="인증번호 입력">
	                        		<button type="button" class="reset_btn">재설정</button>
                        		</div>
                        		
	                        </div>
                        
                        	
                    </div>
                </div>
            </div>

            <div id="choice_info" class="info_box">
                <div class="sub_title">
                    <i class="bi bi-check-lg"></i>
                    선택정보
                </div>

                <div class="input_area">
                    <div class="mb-3 row">
                        <label class="col-sm-3 col-form-label">성별</label>
                        <div class="col-sm-9">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="gender" id="no_gender" value="null">
                                <label class="form-check-label" for="no_gender">선택안함</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="gender" id="male" value="m">
                                <label class="form-check-label" for="male">남</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="gender" id="female" value="f">
                                <label class="form-check-label" for="female">여</label>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3 row">
                        <label class="col-sm-3 col-form-label">생년월일</label>
                        <div class="col-sm-9">
                            <div class="form-check" id="birth_day_wrapper">
                                <select class="form-select" aria-label="Default select example" id="inputYear">
                                    <option>선택</option>
                                <option value="2022">2022년</option><option value="2021">2021년</option><option value="2020">2020년</option><option value="2019">2019년</option><option value="2018">2018년</option><option value="2017">2017년</option><option value="2016">2016년</option><option value="2015">2015년</option><option value="2014">2014년</option><option value="2013">2013년</option><option value="2012">2012년</option><option value="2011">2011년</option><option value="2010">2010년</option><option value="2009">2009년</option><option value="2008">2008년</option><option value="2007">2007년</option><option value="2006">2006년</option><option value="2005">2005년</option><option value="2004">2004년</option><option value="2003">2003년</option><option value="2002">2002년</option><option value="2001">2001년</option><option value="2000">2000년</option><option value="1999">1999년</option><option value="1998">1998년</option><option value="1997">1997년</option><option value="1996">1996년</option><option value="1995">1995년</option><option value="1994">1994년</option><option value="1993">1993년</option><option value="1992">1992년</option><option value="1991">1991년</option><option value="1990">1990년</option><option value="1989">1989년</option><option value="1988">1988년</option><option value="1987">1987년</option><option value="1986">1986년</option><option value="1985">1985년</option><option value="1984">1984년</option><option value="1983">1983년</option><option value="1982">1982년</option><option value="1981">1981년</option><option value="1980">1980년</option><option value="1979">1979년</option><option value="1978">1978년</option><option value="1977">1977년</option><option value="1976">1976년</option><option value="1975">1975년</option><option value="1974">1974년</option><option value="1973">1973년</option><option value="1972">1972년</option><option value="1971">1971년</option><option value="1970">1970년</option><option value="1969">1969년</option><option value="1968">1968년</option><option value="1967">1967년</option><option value="1966">1966년</option><option value="1965">1965년</option><option value="1964">1964년</option><option value="1963">1963년</option><option value="1962">1962년</option><option value="1961">1961년</option><option value="1960">1960년</option><option value="1959">1959년</option><option value="1958">1958년</option><option value="1957">1957년</option><option value="1956">1956년</option><option value="1955">1955년</option><option value="1954">1954년</option><option value="1953">1953년</option><option value="1952">1952년</option><option value="1951">1951년</option><option value="1950">1950년</option><option value="1949">1949년</option><option value="1948">1948년</option><option value="1947">1947년</option><option value="1946">1946년</option><option value="1945">1945년</option><option value="1944">1944년</option><option value="1943">1943년</option><option value="1942">1942년</option><option value="1941">1941년</option><option value="1940">1940년</option><option value="1939">1939년</option><option value="1938">1938년</option><option value="1937">1937년</option><option value="1936">1936년</option><option value="1935">1935년</option><option value="1934">1934년</option><option value="1933">1933년</option><option value="1932">1932년</option><option value="1931">1931년</option><option value="1930">1930년</option><option value="1929">1929년</option><option value="1928">1928년</option><option value="1927">1927년</option><option value="1926">1926년</option><option value="1925">1925년</option><option value="1924">1924년</option><option value="1923">1923년</option><option value="1922">1922년</option><option value="1921">1921년</option><option value="1920">1920년</option><option value="1919">1919년</option><option value="1918">1918년</option><option value="1917">1917년</option><option value="1916">1916년</option><option value="1915">1915년</option><option value="1914">1914년</option><option value="1913">1913년</option><option value="1912">1912년</option><option value="1911">1911년</option><option value="1910">1910년</option><option value="1909">1909년</option><option value="1908">1908년</option><option value="1907">1907년</option><option value="1906">1906년</option></select>
                                <select class="form-select" aria-label="Default select example" id="inputMonth">
                                    <option>선택</option>
                                <option value="01">01월</option><option value="02">02월</option><option value="03">03월</option><option value="04">04월</option><option value="05">05월</option><option value="06">06월</option><option value="07">07월</option><option value="08">08월</option><option value="09">09월</option><option value="10">10월</option><option value="11">11월</option><option value="12">12월</option></select>
                                <select class="form-select" aria-label="Default select example" id="inputDay">
                                    <option>선택</option>
                                <option value="01">01일</option><option value="02">02일</option><option value="03">03일</option><option value="04">04일</option><option value="05">05일</option><option value="06">06일</option><option value="07">07일</option><option value="08">08일</option><option value="09">09일</option><option value="10">10일</option><option value="11">11일</option><option value="12">12일</option><option value="13">13일</option><option value="14">14일</option><option value="15">15일</option><option value="16">16일</option><option value="17">17일</option><option value="18">18일</option><option value="19">19일</option><option value="20">20일</option><option value="21">21일</option><option value="22">22일</option><option value="23">23일</option><option value="24">24일</option><option value="25">25일</option><option value="26">26일</option><option value="27">27일</option><option value="28">28일</option><option value="29">29일</option><option value="30">30일</option><option value="31">31일</option></select>
                            </div>

                            <div>
                                <span class="small_txt">선택항목 추가 후, 생일쿠폰등 다양한 혜택 받으세요.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="marketingAgree" class="info_box">
                <div class="sub_title">
                    <i class="bi bi-key-fill"></i>
                    마케팅 정보 수신동의 
                </div>

                <div class="input_area">
					<div class="form-check">
					  <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
					  <label class="form-check-label" for="flexCheckDefault">
					    이메일을 통한 이벤트/ 주문 정보의 수신에 동의합니다.
					  </label>
					</div>
					<div class="form-check">
					  <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
					  <label class="form-check-label" for="flexCheckDefault">
					    SMS를 통한 이벤트/ 주문 정보의 수신에 동의합니다.
					  </label>
					</div>

                </div>
            </div>
            
            <div class="button_area">
                <button type="button" class="changeBtn">취소</button>
                <button type="button" class="changeBtn btn_change">변경</button>
            </div>
            
            <div class="withdrawal">
            	<a class="btn_withdrawal" href="secession.html">
            		<span>회원탈퇴</span>
            	</a>
            </div>
            
        </div>
    </div>
        
        </div>    	
    </main>

    <div class="footer">
        <div class="footercontainer">
            <div class="footermenu">
                <ul>
                    <li><a href="#"><span>이용약관</span></a></li>
                    <li><a href="#"><span>개인정보취급방침</span></a></li>
                    <li><a href="#"><span>법적고지</span></a></li>
                </ul>
                <div class="footerbtn">
                    <a href="#"><span>인재채용</span></a>
                    <a href="#"><span>가맹점모집</span></a>
                </div>
            </div>
            <div class="copyright">
                <h2 class="logo"><img src="images/bkrlogo.png" alt="BKR Logo"></h2>
                <p>
                    서울 종로구 삼봉로 71 G타워 2층 주식회사 비케이알 <span class="footerline"></span>
                    전화주문 1599-0909
                </p>
                <p><a>사업자 등록번호 101-86-76277</a> <span class="footerline"></span>
                    (주)BKR 대표이사 문영주
                </p>
                <p>Copyright 2019 BKR Co., Ltd. All right Reserved</p>
                <div class="sns">
                    <a href="#" class="facebook"></a>
                    <a href="#" class="instagram"></a>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="js/page1.js"></script>
    <script>
		 // 로그인 정보를 가져와서 보여줌
		
		$.ajax({
			url:"/burgerking/loginstatus",
			type:"GET",
			success:function(data){
				$("#emailInfo").text(data.memberID);
				$(".personInfo p").text(data.loginName+"님 안녕하세요");
				$(".user strong").text(data.loginName+" 님!");
				
				
			},
			error:function(){
				alert("에러 발생함");
			}
		});
		 
		 // 휴대폰 변경 버튼 클릭시
		 $(".phoneNumberChangeBtn").on("click",function(){
			 	if($(this).text() == "변경"){
					$(this).text("취소");
					$("#certificationNumWrap").attr("style","");
				} else {
					$(this).text("변경");
					$(".auth_numWrap").attr("style","display:none;");
				}
		 });
		 
		 
		 // 난수 저장 변수
		 let randomNumSave = -1;
		 $("#certificationNumWrap button").on("click",function(){
			 // 5자리 난수 발생 
			 let randomNumber = Math.floor(Math.random() * 100000);
			 randomNumSave = randomNumber;
			 alert(randomNumber);
			 $("#resetWrap").attr("style","");
		 });
		 
		 // 재설정 버튼 클릭시 
		 
		 let count = 0;
		 $("#resetWrap button").on("click",function(){
			 if(randomNumSave == $("#resetWrap input").val()){
				 alert("재설정을 하세요");
			 }else{
				 count++;
				 if(count>5){
					 	count = 0;
				 		let randomNumber = Math.floor(Math.random() * 100000);
						randomNumSave = randomNumber;
						alert("입력횟수를 추가했습니다 새로운 인증번호는 "+randomNumSave+" 입니다");
				 }else{
					 alert("번호를 잘 못 입력했습니다  "+count+"/5 회 남았습니다");	 
				 }
				 
			 	
			 }
		 });
		 
		 
		$(".btn_change").on("click",function(){
			let phoneNumber = $("#phoneNumber").text();
			let gender = $("input[name=gender]:checked").val();
			let years = $("#inputYear").val();
        	let month = $("#inputMonth").val();
        	let day = $("#inputDay").val();
        	
        	let birth = years + month + day;
			
			$.ajax({
				url:"/burgerking/info/update",
				type:"POST",
				data:"phoneNumber="+phoneNumber+"&gender="+gender+"&birth="+birth,
				success:function(){
					alert("회원정보가 변경되었습니다");
					location.href="/burgerking/myKing.html";
				},
				error:function(){
					alert("회원정보가 변경에 실패했습니다");
				}
			});
			
		}); 
		 
    </script>
</body>
</html>